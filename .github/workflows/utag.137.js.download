//tealium universal tag - utag.137 ut4.0.202510101606, Copyright 2025 Tealium.com Inc. All Rights Reserved.
window._paq=window._paq||[];try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag.ut===undefined){utag.ut={};}
if(utag.ut.loader===undefined){u.loader=function(o){var b,c,l,a=document;if(o.type==="iframe"){b=a.createElement("iframe");o.attrs=o.attrs||{"height":"1","width":"1","style":"display:none"};for(l in utag.loader.GV(o.attrs)){b.setAttribute(l,o.attrs[l]);}b.setAttribute("src",o.src);}else if(o.type=="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";for(l in utag.loader.GV(o.attrs)){b[l]=o.attrs[l];}b.src=o.src;}if(o.id){b.id=o.id};if(typeof o.cb=="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb()},false);}else{b.onreadystatechange=function(){if(this.readyState=='complete'||this.readyState=='loaded'){this.onreadystatechange=null;o.cb()}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l=="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b)}}}}else{u.loader=utag.ut.loader;}
u.ev={"view":1,"link":1};u.initialized=false;u.scriptrequested=false;u.queue=[];u.set_custom_vars=function(var_index,var_name,var_val,var_scope){window._paq.push(['setCustomVariable',var_index,var_name,var_val,var_scope]);};u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,command_array,i,cvar;u.data={"qsp_delim":"&","kvp_delim":"=","base_url":"//webstats.mylearnerportal.com","account":"4","event_type":"category","tracking_url":"","link_tracking":"true","order_discount":false,"product_id":[],"product_name":[],"product_sku":[],"product_brand":[],"product_category":[],"product_subcategory":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"custom_vars":{}};c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f].indexOf("custom.")===0){cvar=/^custom.(\w)(\d)\.(.*?)$/.exec(e[f]);if(cvar){u.data.custom_vars[e[f]]={"index":parseInt(cvar[2]),"name":cvar[3],"value":b[d],"scope":(cvar[1]==="p"?"page":"visit")};}}else{u.data[e[f]]=b[d];}}}}
u.data.order_id=u.data.order_id||b._corder||"";u.data.order_total=u.data.order_total||b._ctotal||"";u.data.order_subtotal=u.data.order_subtotal||b._csubtotal||"";u.data.order_shipping=u.data.order_shipping||b._cship||"";u.data.order_tax=u.data.order_tax||b._ctax||"";if(u.data.product_id.length===0&&b._cprod!==undefined){u.data.product_id=b._cprod.slice(0);}
if(u.data.product_name.length===0&&b._cprodname!==undefined){u.data.product_name=b._cprodname.slice(0);}
if(u.data.product_sku.length===0&&b._csku!==undefined){u.data.product_sku=b._csku.slice(0);}
if(u.data.product_category.length===0&&b._ccat!==undefined){u.data.product_category=b._ccat.slice(0);}
if(u.data.product_quantity.length===0&&b._cquan!==undefined){u.data.product_quantity=b._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&b._cprice!==undefined){u.data.product_unit_price=b._cprice.slice(0);}
if(u.data.product_discount.length===0&&b._cpdisc!==undefined){u.data.product_discount=b._cpdisc.slice(0);}
if(u.data.product_sku.length===0){u.data.product_sku=u.data.product_id.slice(0);}
if(u.data.link_tracking==="true"){window._paq.push(['enableLinkTracking']);}
u.data.tracking_url=u.data.base_url+"/"+"piwik.php";u.data.base_url=u.data.base_url+"/piwik.js?";if(u.data.account){window._paq.push(['setSiteId',u.data.account]);}
window._paq.push(['setTrackerUrl',u.data.tracking_url]);if("view"===a){for(cvar in utag.loader.GV(u.data.custom_vars)){u.set_custom_vars(u.data.custom_vars[cvar].index,u.data.custom_vars[cvar].name,u.data.custom_vars[cvar].value,u.data.custom_vars[cvar].scope);}
if(u.data.event_type==="category"){window._paq.push(['setEcommerceView',productSku=false,productName=false,category=u.data.product_category[0]]);}else if(u.data.event_type==="product"){window._paq.push(['setEcommerceView',u.data.product_sku[0],u.data.product_name[0],u.data.product_category[0],u.data.product_unit_price[0]]);}else if(u.data.event_type==="cart"){u.data.cart_total=0;for(i=0;i<u.data.product_id.length;i++){window._paq.push(["addEcommerceItem",u.data.product_sku[i],u.data.product_name[i],u.data.product_category[i],u.data.product_unit_price[i],u.data.product_quantity[i]]);u.data.cart_total=u.data.cart_total+parseFloat(u.data.product_unit_price[i]);}
window._paq.push(['trackEcommerceCartUpdate',u.data.cart_total]);}else if(u.data.event_type==="order"&&u.data.order_id){for(i=0;i<u.data.product_id.length;i++){window._paq.push(["addEcommerceItem",u.data.product_sku[i],u.data.product_name[i],u.data.product_category[i],u.data.product_unit_price[i],u.data.product_quantity[i]]);}
if(u.data.product_discount.length>0){u.data.order_discount="";}
for(i=0;i<u.data.product_discount.length;i++){u.data.order_discount=u.data.order_discount+parseFloat(u.data.product_discount[i]);}
window._paq.push(['trackEcommerceOrder',u.data.order_id,u.data.order_total,u.data.order_subtotal,u.data.order_tax,u.data.order_shipping,u.data.order_discount]);}
window._paq.push(['trackPageView']);}else if("link"===a){if(u.data.event_category&&u.data.event_action){command_array=[];command_array.push("trackEvent");command_array.push(u.data.event_category);command_array.push(u.data.event_action);if(u.data.event_name){command_array.push(u.data.event_name);}
if(u.data.event_value){command_array.push(u.data.event_value);}
window._paq.push(command_array);}else{if(!u.data.event_category){utag.DB("Event tracking error in Piwik tag (UID: 137). Event category is missing");}
if(!u.data.event_action){utag.DB("Event tracking error in Piwik tag (UID: 137). Event action is missing");}}}
if(!u.initialized){u.loader({"type":"script","src":u.data.base_url,"cb":function(){u.initialized=true;},"loc":"script","id":'utag_137'});}
}};utag.o[loader].loader.LOAD(id);}("137","ibm.web"));}catch(error){utag.DB(error);}
